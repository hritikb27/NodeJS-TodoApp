<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
</head>
<body>
    <h1>HOME PAGE!</h1>
    <a href="/create-todo">Add Todo</a>
    <h2>All Todos:</h2>
    <% if(blogs.length>=1){ %>
        <% blogs.forEach(blog=>{ %>
            <h1><%= blog.title %> <button class="delete" data-del="<%= blog._id %>">Delete</button></h1>
        <% }) %>
    <% } %>
</body>

<script>
    const deleteButton = document.querySelectorAll('.delete');

    deleteButton.forEach(button=>{
        button.addEventListener('click',(e)=>{
            const endpoint = `/blogs/${button.dataset.del}`;
            fetch(endpoint,{
                method: 'DELETE'
            })
            .then((res)=>res.json())
            .then((data)=>window.location.href=data.redirect)
            .catch(err=>{
                console.log(err)
            })
        })
    })
</script>
</html>